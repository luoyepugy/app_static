!function(){function t(){function t(t,n){var n=n||"alert";"alert"==n?mui.alert(t,"E场景活动"):"toast"==n&&mui.toast(t)}var n={show:t};return n}function n(){function t(t){var n={aesKey:"1234367822345608",ivStr:"1166222233334455",newAesKey:null},e=CryptoJS.enc.Utf8.parse(t),r=CryptoJS.enc.Utf8.parse(n.aesKey),a=CryptoJS.enc.Utf8.parse(n.ivStr),i=CryptoJS.AES.encrypt(e,r,{iv:a,mode:CryptoJS.mode.CBC});return i.toString()}var n={getValue:t};return n}function e(t){function n(n,e,r){e.bind("click",function(){t.history.back()})}var e={restrict:"AE",link:n};return e}function r(t){function n(n){""==r.data?t.history.back():r.data=n}function e(){return r.data}var r={data:"",setDatas:n,getDatas:e};return r}function a(t){function n(t,n,r){var a=$(window).height();t=$(t),r=r>0?r:a/10,$("html, body").animate({scrollTop:n?t.offset().top-r:t.offset().top+t.outerHeight()+r-a},{duration:200,easing:"linear",complete:function(){e(t)||t[0].scrollIntoView(!!n)}})}function e(t){function n(t){return t>o&&t<c}t=$(t);var e=$(window),r=e.height(),a=t.offset().top,i=t.outerHeight(),o=e.scrollTop(),c=o+r;return!!n(a+(i>r?r:i)/2)||i>r&&n(a+i-r/2)}var r={toView:n,inView:e};return r}function i(){return function(t){switch(t){case 0:return"保存";case 1:return"通过";case 2:return"拒绝";case 3:return"待审核";case 4:return"预热中";case 5:return"赞助中";case 6:return"赞助成功";default:return"赞助失败"}}}e.$inject=["$window"],r.$inject=["$window"],a.$inject=["$window"],angular.module("common",[]).factory("messageService",t).factory("encryptService",n).factory("transmitService",r).factory("anchorService",a).directive("backButton",e).filter("suportStatus",i)}(),function(){function t(t,n){function e(n){var e=$(n).find("input[data-empty], textarea[data-empty]"),r=0,a=!1;return e.each(function(){var n=($(this).attr("name"),$.trim($(this).val()));if(""==n||null==n)return $(this).focus(),t.show($(this).data("empty")),r++,!1}),0==r&&(a=!0),a}function r(n){function e(t){if(/[^0-9 \-]+/.test(t))return!1;var n=0,e=0,r=!1;t=t.replace(/\D/g,"");for(var a=t.length-1;a>=0;a--){var i=t.charAt(a);e=parseInt(i,10),r&&(e*=2)>9&&(e-=9),n+=e,r=!r}return n%10===0}var r=!0,a={phone:$(n).find("input[format-phone]"),bankCard:$(n).find("input[format-bankCard]"),password:$(n).find("input[format-password]"),confirmPwd:$(n).find("input[format-confirmPwd]"),minLength:$(n).find("input[min-length]"),maxLength:$(n).find("input[max-length]"),number:$(n).find("input[format-number]")},i={phone:/^((145|147)|(15[^4])|(17[6-8])|((13|18)[0-9]))\d{8}$/,number:/^[0-9]*$/},o=function(n,a){var o=0,c=0;if(n.length>0){if(n.each(function(){if("phone"==a&&(i.phone.test($(this).val())||(c++,t.show($(this).data("empty").slice(3)+"格式不正确"))),"number"==a&&(i.number.test($(this).val())||(c++,t.show("请输入数字格式"))),"minLength"==a){var n=$(this).attr("min-length");$(this).val().length<n&&(c++,t.show($(this).data("empty").slice(3)+"最小长度为"+n))}if("maxLength"==a){var u=$(this).attr("max-length");$(this).val().length>u&&(c++,t.show($(this).data("empty").slice(3)+"最大长度为"+u))}if("bankCard"==a&&(e($(this).val())||(c++,t.show($(this).data("empty").slice(3)+"格式不正确"))),0!=c)return $(this).focus(),o++,r=!1,!1}),0!=o)return!1;r=!0}return!0};if(!o(a.phone,"phone"))return!1;if(!o(a.minLength,"minLength"))return!1;if(!o(a.maxLength,"maxLength"))return!1;if(!o(a.bankCard,"bankCard"))return!1;if(!o(a.number,"number"))return!1;if(a.confirmPwd.length>0&&a.confirmPwd.length>0){if(a.confirmPwd.val()!==a.password.val())return a.confirmPwd.focus(),t.show("两次密码输入不一致"),r=!1,!1;r=!0}return r}function a(t){return!(!o.isEmpty(t)||!o.isCorrectFormat(t))}function i(t){var e={};$(t).find("input[name],textarea[name],select[name]").each(function(){var t=$(this).attr("name"),n=$.trim($(this).val());if(t.indexOf(".")==-1)e[t]=n;else{var r=t.split(".");e[r[0]]||(e[r[0]]={}),e[r[0]][r[1]]=n}});var r=function(n,e){var r=$(t).find("input["+n+"]");r.length>0&&r.each(function(){e($(this).attr("name"),$(this).val())})};return r("encrypt",function(t,r){e[t]=n.getValue(r)}),r("timestamp",function(t,n){e[t]=new Date(n).getTime()}),e}var o={isEmpty:e,isCorrectFormat:r,emptyAndFormat:a,submitData:i};return o}function n(t,n,e,r,a){function i(i,o,c){i.text=c.text||"提交保存",i.btnClass=c.btnClass||"";var u;o.bind("click",function(){if(!e.emptyAndFormat(c.form))return!1;if(u=e.submitData(c.form)){var o=c.method||"POST";t.getDatas(o,c.action,u).then(function(t){return c.callback?(i.callback({arg1:t}),!1):void(0==t.code?("back"==c.state?a.history.back():c.state&&r.go(c.state),c.msg&&n.show(c.msg)):(t.msg&&n.show(t.msg),c.msg&&n.show(c.msg)))})}})}var o={restrict:"E",template:'<button name="submitBtn" class="mui-btn mui-btn-block mui-btn-green" ng-class="btnClass">{{text}}</button>',replace:!0,scope:{callback:"&"},link:i};return o}t.$inject=["messageService","encryptService"],n.$inject=["httpService","messageService","validateService","$state","$window"],angular.module("form",["request","common","ui.router"]).factory("validateService",t).directive("submitButton",n)}(),function(){function t(t,n,e){function r(r,a,i,o){var c=t.defer(),u={method:"POST",url:a,data:i};return"GET"==r&&(u={method:"GET",url:a,params:i}),n(u).success(function(t,n){var r=r||"data";0==t.code||"data"==r?c.resolve(t):"msg"==r&&e.show(t.msg)}).error(function(t,n){e.show("服务器请求失败")}),c.promise}return{getDatas:r}}t.$inject=["$q","$http","messageService"],angular.module("request",["common"]).factory("httpService",t)}();